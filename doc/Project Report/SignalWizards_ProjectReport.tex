\documentclass[letterpaper, 11pt, onecolumn, oneside]{article}

%%%%%%%%%%%%%%%%% Preamble %%%%%%%%%%%%%%%%%
% Packages
\usepackage[utf8]{inputenc}
\usepackage{textcomp}
\usepackage{multirow}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{fancyhdr}
\usepackage{xcolor}
\usepackage[margin=1in]{geometry}
\usepackage[T1]{fontenc}
\usepackage{enumitem}
% \usepackage[numbered, framed]{matlab-prettifier}
\usepackage{rotating}
\usepackage{hyperref}
\usepackage{needspace}

% Variables
\newcommand{\thisassignment}{Graduate Project Report}
\newcommand{\myteam}{Signal Wizards}

\renewcommand{\familydefault}{\rmdefault}

% Styling
\definecolor{msu-maroon}{HTML}{660000}

\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    urlcolor=blue,
}

\setlength{\parindent}{0pt}
\setlength{\parskip}{1em}

\fancypagestyle{header}{
    \renewcommand{\headrulewidth}{2pt}
    \renewcommand{\headrule}{\hbox to\headwidth{\color{msu-maroon}\leaders\hrule height \headrulewidth\hfill}}
    \renewcommand{\footrulewidth}{2pt}
    \renewcommand{\footrule}{\hbox to\headwidth{\color{msu-maroon}\leaders\hrule height \footrulewidth\hfill}}
    \fancyhf{}
    \fancyhead[L]{\scriptsize ECE 6413}
    \fancyhead[C]{\LARGE {Digital Signal Processing}}
    \fancyhead[R]{\scriptsize Eric Farmer (EDF63)\\Will Carroll (WOC17)}
    \fancyfoot[L]{\scriptsize DSP - \thisassignment{}}
    \fancyfoot[C]{\scriptsize Page \thepage}
    \fancyfoot[R]{\scriptsize \today}
}
\pagestyle{header}

% Info
\title{
    Virtual Reconstruction of Spacial Reverberation \\
    \Large{Graduate Project Report}
}
\author{
    \begin{tabular}{cc}
        \multicolumn{2}{c}{\textbf{Team Signal Wizards}}                   \\
                                         &                                 \\
        Eric Farmer                      & Will Carroll                    \\
        \href{mailto:edf63@msstate.edu}{\texttt{edf63@msstate.edu}}       & \href{mailto:woc17@msstate.edu}{\texttt{woc17@msstate.edu}}      \\
        Leader                           & Member
    \end{tabular}
}
\date{December 2, 2018}

% Body
\begin{document}

\maketitle
\newpage

\section*{Abstract}
The objective of this project is to create a system that artificially reconstructs the reverberative properties of an environment.
By capturing the impulse response of the designated space, this system allows the user to simulate the space's acoustics for various inputs.
This ability is useful for sound engineers to test audio performance in different environments without the difficulty of a real-world experiment.
Additionally, this system could reduce configuration time for public address (PA) systems by allowing the user to identify anomalies in the space's frequency response.
This application is beyond the scope of this project, but serves as an example of the potential applications this experiment.
For system performance analysis, the output of the artificial space is compared to the captured output of the real-world space for controlled inputs.

\Needspace{10\baselineskip}
\section*{Introduction}
The objective of this project is to design a system to artificially reconstruct the spacial presence of an environment using the environment's impulse response.
This system has applications in virtual reality \cite{beig2018scalable} where realistic acoustic feedback is necessary for improving the user experience.
Additionally, the system could be applied in live audio performances where the audio engineer must consider the frequency response of the environment.
According to \cite{johnsonperceptually}, proper reverb is crucial to the improved subjective quality of a sound.
Designing a system to artificially reconstruct an environment requires capturing the impulse response and artificially reconstructing the sound.

    \subsection*{Capturing the Impulse Response of a Space}
    The impulse response of the environment is critical to the process of reconstructing its spacial presence.
    Capturing the impulse response is a two-part process --- generate an acoustical impulse and measure the response of the space.
    An acoustical impulse needs to be a nearly instantaneous burst of sound.
    There are specialized devices to generate an acoustical impulse, but these devices are costly and usually impractical for the identified applications of this system.
    Based on research presented by the Audio Engineering Society \cite{abel2010estimating}, popping a balloon can serve as a replacement for acoustical impulse generation devices in most situations.
    Other research suggested a person clapping his hands in the space to create the impulse.
    The balloon pop method is used in this project because of its low cost and ease of repeating performance, which would be difficult if clapping hands.

    \subsection*{Simulating Audio Responses of a Space}

\Needspace{10\baselineskip}
\section*{Methodology \& Theory}
Using Matlab, the spacial presence of five locations is artificially reconstructed.
Each environment has an infinite impulse response (IIR) that defines the reverberation that occurs in the space.
Since this impulse response is infinite in length and cannot be captured by a digital signal processing system, the objective of this experiment is to determine a FIR filter that approximates the impulse response of the IIR filter.
An FIR approximation of each space is obtained by inputting a impulse in the space and recording the output using a microphone.
Because of the sampling rate and duration of sampling, this produces an FIR filter with a length of at least 50,000.
While a large filter may not be practical for real-time implementation, there are applications in post-processing effects and room analysis that do not require real-time speed.
However, a stretch goal is to minimze the filter size without an appreciative loss in quality, as determined by the qualitative analysis, so that the filters may be used in applications such as live performances or virtual reality simulations.
The experiment is conducted by measuring the room impulse response (RIR), inputting an audio sample into the room while recording the output, and comparing to a synthesized version of the output from Matlab.
To provide a variety of reverberation scenarios, the RIR is captured from the following locations:

\begin{itemize}
    \item Eric Farmer's Living room
    \item Simrall Hall Anechoic Chamber
    \item Simrall Hall Stairwell
    \item MSU SSRC Foyer
    \item MSU Old Intramural Fields.
\end{itemize}

The first step to measuring the RIR is to determine the noise floor of the room and the microphone.
This is accomplished by observing the output of the room when there is no input.
Using identical balloons filled to the same circumference, the balloon pop simulates the impulse input into each space.
To prevent uneven spacial effects, the balloon and microphone are colocated in the center of the space.
An operator pops the balloon above the microphone using a sharp needle while standing an arm's length away.
The microphone records the response of the room.
The operator is not colocated with the microphone and the balloon to prevent distortions in the reverbation.
The microphone records the impulse response until the room returns to a threshold set by the root mean square (RMS) of the noise floor.
This process determines a large FIR filter for the space and is repeated for each location.

After measuring the RIR and the space has returned to its noise floor, each audio input sample is played and the output of the room recorded on the microphone.
To prevent spacial distortions, the audio input sample is played through a single speaker colocated under the microphone.
Both the speaker and the microphone are positioned such that the focus of the output/input is upward.
This process is repeated for each location.

After collecting the RIR for each space, Matlab is used to convolve each audio input sample with each spacial impulse response.
This provides a set of simulated outputs versus a set of real outputs for each location.
Qualitative and quantitative measurements were obtained comparing the simulated and real outputs, which is discussed in the following section.

The stretch goal is performed by using Matlab to decimate the filter and calculating the output for each audio input sample at each location.
The decimation is performed on the set of decimation factors, $D = [2, 4, 8, 16, 32, 64, 128, 256]$.
Due to the amount of samples generated by this process, only the speech samples were qualitatively measured.

\Needspace{10\baselineskip}
\section*{Analysis of Results}


\Needspace{10\baselineskip}
\section*{Conclusion}


\newpage
\bibliography{SignalWizards_ProjectReport}
\bibliographystyle{ieeetr}

\end{document}
